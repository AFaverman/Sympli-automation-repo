{% assign sca_product_id_text = "," | append : product.id | append : "," %}{% assign sca_price = product.price %}{% assign sca_price_min = product.price_min %}{% assign sca_price_max = product.price_max %}{% assign sca_compare_at_price = product.compare_at_price %}{% assign sca_compare_at_price_min = product.compare_at_price_min %}{% assign sca_compare_at_price_max = product.compare_at_price_max %}{% assign sca_product_available = product.available %}{% assign sca_product_variantCount = product.variants.size %}{% assign sca_compare_at_price_varies = product.compare_at_price_varies %}{% assign sca_price_varies = product.price_varies %}{% assign sca_has_only_default_variant = false %}{% assign sca_product_variants_json = product.variants | json %}{% capture sca_product_json %}{ {% if sca_all_gift_products_ids == null or sca_all_gift_products_ids contains sca_product_id_text %}{% assign sca_product_available = false %}{% assign sca_product_variantCount = 0 %}{% assign sca_has_only_default_variant = false %}{% assign sca_is_first_variant = true %}{% capture sca_variants_json%}[{% for variant in product.variants %}{% unless variant.metafields.secomapp.freegifts %}{% unless variant.title contains '(Freegifts)' %}{% unless variant.title contains '% off)' %}{% unless variant.metafields.shappify_qb.qb_hide == "1" %}{% unless variant.metafields.shappify_bundle.is_bundle == "true" %}{% unless variant.metafields.brodev_scn.hide == "true" %}{% unless variant.metafields.wholesaler2.wholesale %}{% unless variant.metafields.Wholesaler.level %}{% unless variant.title contains '(Wholesale' %}{% if sca_is_first_variant %}{{ variant | json }}{% assign sca_price = variant.price %} {% assign sca_price_min = variant.price %}{% assign sca_price_max = variant.price %}{% assign sca_compare_at_price = variant.compare_at_price %}{% assign sca_compare_at_price_min = variant.compare_at_price %}{% assign sca_compare_at_price_max = variant.compare_at_price %}{% assign sca_product_available = variant.available %}{% assign sca_product_variantCount = 1 %}{% assign sca_is_first_variant = false %}{% else %},{{variant | json }}{% if sca_price_min >= variant.price %}{% assign sca_price_min = variant.price %}{% assign sca_price = variant.price %}{% endif %}{% if sca_price_max <= variant.price %}{% assign sca_price_max = variant.price %}{% endif %}{% if variant.compare_at_price %}{% if sca_compare_at_price_min == null or sca_compare_at_price_min >= variant.compare_at_price %}{% assign sca_compare_at_price_min = variant.compare_at_price %}{% assign sca_compare_at_price = variant.compare_at_price %}{% endif %}{% if sca_compare_at_price_max == null or sca_compare_at_price_max < variant.compare_at_price %}{% assign sca_compare_at_price_max = variant.compare_at_price %}{% endif %}{% endif %}{% if variant.available == true %}{% assign sca_product_available = true %}{% endif %}{% assign sca_product_variantCount = sca_product_variantCount | plus: 1 %}{% endif %}{% endunless %}{% endunless %}{% endunless %}{% endunless %}{% endunless %}{% endunless %}{% endunless %}{% endunless %}{% endunless %}{% endfor %}]{% endcapture %}{% if sca_price_min < sca_price_max %}{% assign sca_price_varies = true %}{% else %}{% assign sca_price_varies = false %}{% endif %}{% if sca_compare_at_price_min < sca_compare_at_price_max %}{% assign sca_compare_at_price_varies = true %}{% else %}{% assign sca_compare_at_price_varies = false %}{% endif %}{% if sca_product_variantCount > 1 %}{% assign sca_has_only_default_variant = true %}{% endif %}{% if sca_product_variantCount == product.variants.size %}"variants":{{ product.variants }},{% else %}{% assign sca_product_variants_json = sca_variants_json %}"variants":{{sca_variants_json }},{% endif %}{% endif %}"id": {{ product.id }},"title": {{ product.title | json }},"handle": {{ product.handle | json }},"description": {{ product.description | json }},"published_at": {{ product.published_at | json }},"created_at": {{ product.created_at | json }},"vendor": {{ product.vendor | json }},"type": {{ product.type | json }},"tags": {{ product.tags | json }},"price": {{ sca_price }},"price_min": {{ sca_price_min }},"price_max": {{ sca_price_max }},"available": {{ product.available }},"price_varies": {{sca_price_varies }},"compare_at_price": {{ sca_compare_at_price }},"compare_at_price_min": {{ sca_compare_at_price_min }},"compare_at_price_max": {{ sca_compare_at_price_max }},"compare_at_price_varies": {{ sca_compare_at_price_varies }},"images": {{ product.images | json }},"featured_image": {{ product.featured_image | json }},"options": {{ product.options | json }},"media": {{ product.media | json }},"content": {{product.content | json}} }{% endcapture sca_product_json %}
 
 <div class="ProductMeta">
   {% form 'currency' %}
     {% for currency in shop.enabled_currencies %}
       {% if currency == cart.currency %}
           {%- assign current_currency = currency.iso_code -%}
       {% else %}
 
       {% endif %}
     {% endfor %}
   {% endform %}	
   {%- if section.settings.show_vendor and product.vendor != blank -%}
     <h2 class="ProductMeta__Vendor Heading u-h6">
       {%- assign vendor_handle = product.vendor | handle -%}
       {%- assign collection_for_vendor = collections[vendor_handle] -%}
 
       {%- unless collection_for_vendor.empty? -%}
         <a href="{{ collection_for_vendor.url }}">{{ product.vendor }}</a>
       {%- else -%}
         {{- product.vendor -}}
       {%- endunless -%}
     </h2>
   {%- endif -%}
 
   <div style="position:relative;">
     <h1 class="ProductMeta__Title Heading u-h2">
       {%- if template.name == 'product' -%}
         {{- product.title -}}
       {%- else -%}
         <a href="{{ product.url }}">{{ product.title }}</a>
       {%- endif -%}
     </h1>
     {% render 'primeb', product: product, hideAssets:'1', primebGroup:'1', primebOuterClass:'', primebOuterStyle:'margin: 10px 0px;', primebInnerStyle:'', primebInnerClass: 'prime-d-inline-block prime-mb-1' %}
   <div name="secomapp-fg-image-{{ product.id }}" style="display: none;">{{ "icon-freegift.png" | asset_url | img_tag: "FG icon", "sca-fg-img-collect lazy2" | replace: " src=", " data-src=" }}</div></div>
 
   {%- if section.settings.show_sku and product.selected_or_first_available_variant.sku != blank -%}
     <p class="ProductMeta__Sku Heading Text--subdued u-h6">{{ 'product.form.sku' | t }}: <span class="ProductMeta__SkuNumber">{{ product.selected_or_first_available_variant.sku }}</span></p>
   {%- endif -%}
 
   
 {% comment %}Start automatically added Judge.me widget{% endcomment %}
   {% render 'judgeme_widgets', widget_type: 'judgeme_preview_badge', concierge_install: true, product: product %}
 {% comment %}End automatically added Judge.me widget{% endcomment %}
 {%- if product.template_suffix != 'coming-soon' -%}
 
     {%- for tag in product.tags -%}
 		{%- if tag contains 'PSO' -%}
 			<div class="perm-sellout">
               <p data-variant="{{ tag }}"></p>
               <input type="hidden" name="{{ tag }}">
   			</div>
   		{%- endif -%}
     {%- endfor -%} 
   
     <div class="ProductMeta__PriceList Heading">
       {%- if sca_compare_at_price > sca_price -%}
         <span class="ProductMeta__Price Price Price--highlight Text--subdued u-h4">{{ current_currency }} {{ product.selected_or_first_available_variant.price | money_without_trailing_zeros }}</span>
         <span class="ProductMeta__Price Price Price--compareAt Text--subdued u-h4">{{ current_currency }} {{ product.selected_or_first_available_variant.compare_at_price | money_without_trailing_zeros }}</span>
       {%- else -%}
         <span class="ProductMeta__Price Price Text--subdued u-h4">{{ current_currency }} {{ product.selected_or_first_available_variant.price | money_without_trailing_zeros }}</span>
       {%- endif -%}
     </div>
   {%- endif -%}
 
   {%- if show_description and section.settings.description_below_add_to_cart == false -%}
     <div class="ProductMeta__Description">
       <div class="Rte">
         {%- comment -%}
         We have figured out that some merchants were copy-pasting huge chunk of code into the product description,
         which can make the theme crashes if it contains some special attributes used by the theme. We therefore make sure to process this
         {%- endcomment -%}
 
         {{ product.description | replace: 'data-section-type', 'data-section-type-placeholder' }}
       </div>
 
       {%- if section.settings.show_share_buttons -%}
         <div class="ProductMeta__ShareButtons hidden-pocket">
           <span class="ProductMeta__ShareTitle Heading Text--subdued u-h7">{{ 'product.form.share' | t }}</span>
 
           {%- assign share_url = shop.url | append: product.url -%}
           {%- assign twitter_text = product.title -%}
           {%- assign pinterest_description = product.description | strip_html | truncatewords: 15 | url_param_escape -%}
           {%- assign pinterest_image = product.featured_image | img_url: 'large' | prepend: 'https:' -%}
 
           <div class="ProductMeta__ShareList Text--subdued">
             <a class="ProductMeta__ShareItem" href="https://www.facebook.com/sharer.php?u={{ share_url }}" target="_blank" rel="noopener" aria-label="Facebook">{%- render 'icon' with 'facebook' -%}</a>
             <a class="ProductMeta__ShareItem" href="https://twitter.com/share?{% if twitter_text != blank %}text={{twitter_text}}&{% endif %}url={{ share_url }}" target="_blank" rel="noopener" aria-label="Twitter">{%- render 'icon' with 'twitter' -%}</a>
             <a class="ProductMeta__ShareItem" href="https://pinterest.com/pin/create/button/?url={{ share_url }}{% if pinterest_image != blank %}&media={{ pinterest_image }}{% endif %}&description={{ pinterest_description }}" target="_blank" rel="noopener" aria-label="Pinterest">{%- render 'icon' with 'pinterest' -%}</a>
           </div>
         </div>
       {%- endif -%}
     </div>
   {%- endif -%}
 </div>